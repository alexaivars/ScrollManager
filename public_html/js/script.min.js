((function(){var $,BackgroundSection,ScrollManager,ScrollSection,__hasProp=Object.prototype.hasOwnProperty,__extends=function(child,parent){for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};$=jQuery,window.console==null&&(window.console={log:function(){}}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(searchElement){"use strict";var k,len,n,t;if(typeof this=="undefined"||this===null)throw new TypeError;t=Object(this),len=t.length>>>0;if(len===0)return-1;n=len,arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:n!==0&&n!==1/0&&n!==-Infinity&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),k=n>=0?Math.min(n,len-1):len-Math.abs(n);while(k>=0){if(k in t&&t[k]===searchElement)return k;k--}return-1}),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){"use strict";var k,len,n,t;if(typeof this=="undefined"||this===null)throw new TypeError;t=Object(this),len=t.length>>>0;if(len===0)return-1;n=0,arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:n!==0&&n!==Infinity&&n!==-Infinity&&(n=(n>0||-1)*Math.floor(Math.abs(n))));if(n>=len)return-1;k=n>=0?n:Math.max(len-Math.abs(n),0);while(k<len){if(k in t&&t[k]===searchElement)return k;k++}return-1}),ScrollSection=function(){ScrollSection.prototype.$container=null;function ScrollSection(elm){this.$container=elm instanceof jQuery?elm:$(elm),this.init();return}return ScrollSection.prototype.init=function(){var _scroll,_transition;this.$container.css({position:"fixed",display:"section",height:this.$container.height()}),_scroll=this.$container.data("scroll"),this.scroll=function(value){return value!=null&&(_scroll=Math.max(0,value)),_scroll},_transition=0,this.transition=function(value){return value!=null&&(_transition=Math.min(1,Math.max(0,value)),this.ontransition(_transition)),_transition}},ScrollSection.prototype.top=function(y,o){return y!=null&&(this.$container.css({top:y}),o!=null&&this.transition(o/this.scroll())),this.$container.position().top},ScrollSection.prototype.height=function(height){return height!=null&&this.$container.css({height:Math.max(0,height)}),this.$container.height()},ScrollSection.prototype.ontransition=function(value){this.$container.html(value)},ScrollSection}(),BackgroundSection=function(_super){__extends(BackgroundSection,_super),BackgroundSection.prototype.image=null;function BackgroundSection(elm){BackgroundSection.__super__.constructor.call(this,elm);return}return BackgroundSection.prototype.init=function(){var _this=this;this.image=new Image,this.image.onload=function(){return _this.loaded()},this.image.src=this.$container.css("background-image").replace(/"/g,"").replace(/url\(|\)$/ig,""),BackgroundSection.__super__.init.apply(this,arguments)},BackgroundSection.prototype.ontransition=function(){var y;if(this.image.height===0)return;return y=this.transition()*(this.height()-this.image.height),this.$container.css({backgroundPosition:"0 "+y+"px"})},BackgroundSection.prototype.loaded=function(){this.onTransition()},BackgroundSection}(ScrollSection),ScrollManager=function(){ScrollManager.ALIGN_CENTER="center",ScrollManager.ALIGN_TOP="top",ScrollManager.WINDOW_HEIGHT=-1,ScrollManager.prototype.scrollTable=void 0,ScrollManager.prototype.scrollValue=void 0,ScrollManager.prototype.options=void 0;function ScrollManager(options){var index,_container,_dist,_sections;this.options={align:ScrollManager.ALIGN_TOP,debug:!1};for(index in this.options)options!=null&&options[index]!=null&&(this.options[index]=options[index]);ScrollManager.WINDOW_HEIGHT=$(window).height(),_container=void 0,this.container=function(){return _container==null&&(_container=$("<div class='scroll-manager'></div>"),_container.css({height:ScrollManager.WINDOW_HEIGHT}),_container.appendTo($("body"))),_container},_sections=[],this.sections=function(section){if(section&&section instanceof ScrollSection)return _sections.push(section),section.$container.appendTo(this.container()),this.setHeight();if(section)throw new TypeError("expected ScrollSection object");return _sections},_dist=void 0,this.pageDist=function(y){var a,b,x;return y!=null&&(x=this.scrollTable[y],a=this.scrollTable.indexOf(x),b=this.scrollTable.lastIndexOf(x),a!==b?_dist=y-a:_dist=void 0),_dist}}return ScrollManager.prototype.init=function(){var section,_i,_len,_ref,_this=this;_ref=$("#main").find("section");for(_i=0,_len=_ref.length;_i<_len;_i++){section=_ref[_i];switch($(section).data("class")){case"BackgroundSection":this.sections(new BackgroundSection(section));break;default:this.sections(new ScrollSection(section))}}$(window).scroll(function(event){return _this.onWindowScroll(event)}),$(window).resize(function(event){return _this.onWindowResize(event)}),$(window).resize()},ScrollManager.prototype.setHeight=function(){var section,_height,_i,_len,_ref;_height=0,_ref=this.sections();for(_i=0,_len=_ref.length;_i<_len;_i++)section=_ref[_i],_height+=section.height()+section.scroll();return this.sections()[this.sections().length-1]&&(_height-=this.sections()[this.sections().length-1].height()),_height+=ScrollManager.WINDOW_HEIGHT,this.container().height(_height)},ScrollManager.prototype.rebuildScrollTable=function(){var f,h,i,s,section,y,_i,_j,_len,_len2,_ref,_ref2;if(this.options.align===ScrollManager.ALIGN_CENTER){this.scrollTable=[],y=Math.round(ScrollManager.WINDOW_HEIGHT*.5),f=!0,_ref=this.sections();for(_i=0,_len=_ref.length;_i<_len;_i++){section=_ref[_i],s=section.scroll(),h=section.height()*.5;if(f!==!0)for(i=1;1<=h?i<=h:i>=h;1<=h?i++:i--)this.scrollTable.push(y-i+1);for(i=1;1<=s?i<=s:i>=s;1<=s?i++:i--)this.scrollTable.push(y-h);for(i=1;1<=h?i<=h:i>=h;1<=h?i++:i--)this.scrollTable.push(y-i+1-h);y-=h*2,f=!1}}else{this.scrollTable=[],y=0,_ref2=this.sections();for(_j=0,_len2=_ref2.length;_j<_len2;_j++){section=_ref2[_j],s=section.scroll(),h=section.height();for(i=1;1<=s?i<=s:i>=s;1<=s?i++:i--)this.scrollTable.push(y);for(i=1;1<=h?i<=h:i>=h;1<=h?i++:i--)this.scrollTable.push(y-i+1);y-=h}}},ScrollManager.prototype.render=function(){var c,section,y,_i,_j,_len,_len2,_ref,_ref2;y=this.scrollValue,c=Math.round(ScrollManager.WINDOW_HEIGHT*.5);if(this.options.align===ScrollManager.ALIGN_CENTER){_ref=this.sections();for(_i=0,_len=_ref.length;_i<_len;_i++)section=_ref[_i],y<c-section.height()*.5?section.top(y,section.scroll()):y===c-section.height()*.5?section.top(y,this.pageDist()):section.top(y,0),y+=section.height()}else{_ref2=this.sections();for(_j=0,_len2=_ref2.length;_j<_len2;_j++)section=_ref2[_j],y<0?section.top(y,section.scroll()):y===0?section.top(y,this.pageDist()):section.top(y,0),y+=section.height()}},ScrollManager.prototype.pageScroll=function(y){var x;y==null&&(y=$(window).scrollTop()),y=Math.max(0,y),y<0||y>this.scrollTable.length?this.scrollValue=-y:(x=this.scrollTable[y],this.scrollValue=x),this.pageDist(y),this.render()},ScrollManager.prototype.onWindowScroll=function(){this.pageScroll($(window).scrollTop())},ScrollManager.prototype.onWindowResize=function(){ScrollManager.WINDOW_HEIGHT=$(window).height(),this.container().width($(window).width()),this.setHeight(),this.rebuildScrollTable(),this.pageScroll($(window).scrollTop())},ScrollManager.prototype.onActivated=function(e){},ScrollManager}(),$(document).ready(function(){var manager;console.log("٩(×̯×)۶ we are kramgo ٩(×̯×)۶"),console.log("----^*_ScrollManager_*^----"),console.log("Copyright Alexander Aivars"),manager=new ScrollManager({align:ScrollManager.ALIGN_CENTER}),manager.init()})})).call(this)